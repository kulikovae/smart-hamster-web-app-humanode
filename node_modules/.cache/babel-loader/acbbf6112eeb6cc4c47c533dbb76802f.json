{"ast":null,"code":"import environment from './nearConfig';\nimport { connect, Contract, keyStores, WalletConnection } from 'near-api-js';\nimport { formatNearAmount } from 'near-api-js/lib/utils/format';\nconst nearEnv = environment('testnet');\nexport async function initializeContract() {\n  nearEnv.keyStore = new keyStores.BrowserLocalStorageKeyStore();\n  const near = await connect(nearEnv);\n  window.walletConnection = new WalletConnection(near);\n  window.accountId = window.walletConnection.getAccountId();\n  window.contract = new Contract(window.walletConnection.account(), nearEnv.contractName, {\n    viewMethods: ['getProduct', 'getProducts'],\n    changeMethods: ['buyProduct', 'setProduct']\n  });\n}\nexport async function getAccountId() {\n  return window.walletConnection.getAccountId();\n}\nexport function login() {\n  window.walletConnection.requestSignIn(nearEnv.contractName);\n}\nexport function logout() {\n  window.walletConnection.signOut();\n  window.location.reload();\n}","map":{"version":3,"names":["environment","connect","Contract","keyStores","WalletConnection","formatNearAmount","nearEnv","initializeContract","keyStore","BrowserLocalStorageKeyStore","near","window","walletConnection","accountId","getAccountId","contract","account","contractName","viewMethods","changeMethods","login","requestSignIn","logout","signOut","location","reload"],"sources":["/Users/loyanix/projects/smart-hamster-web-app/src/utils/near.js"],"sourcesContent":["import environment from './nearConfig';\nimport { connect, Contract, keyStores, WalletConnection } from 'near-api-js';\nimport { formatNearAmount } from 'near-api-js/lib/utils/format';\n\nconst nearEnv = environment('testnet');\n\nexport async function initializeContract() {\n  nearEnv.keyStore = new keyStores.BrowserLocalStorageKeyStore();\n  const near = await connect(nearEnv);\n  window.walletConnection = new WalletConnection(near);\n  window.accountId = window.walletConnection.getAccountId();\n  window.contract = new Contract(window.walletConnection.account(), nearEnv.contractName, {\n    viewMethods: ['getProduct', 'getProducts'],\n    changeMethods: ['buyProduct', 'setProduct'],\n  });\n}\n\nexport async function getAccountId() {\n  return window.walletConnection.getAccountId();\n}\n\nexport function login() {\n  window.walletConnection.requestSignIn(nearEnv.contractName);\n}\n\nexport function logout() {\n  window.walletConnection.signOut();\n  window.location.reload();\n}\n"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,SAASC,OAAT,EAAkBC,QAAlB,EAA4BC,SAA5B,EAAuCC,gBAAvC,QAA+D,aAA/D;AACA,SAASC,gBAAT,QAAiC,8BAAjC;AAEA,MAAMC,OAAO,GAAGN,WAAW,CAAC,SAAD,CAA3B;AAEA,OAAO,eAAeO,kBAAf,GAAoC;EACzCD,OAAO,CAACE,QAAR,GAAmB,IAAIL,SAAS,CAACM,2BAAd,EAAnB;EACA,MAAMC,IAAI,GAAG,MAAMT,OAAO,CAACK,OAAD,CAA1B;EACAK,MAAM,CAACC,gBAAP,GAA0B,IAAIR,gBAAJ,CAAqBM,IAArB,CAA1B;EACAC,MAAM,CAACE,SAAP,GAAmBF,MAAM,CAACC,gBAAP,CAAwBE,YAAxB,EAAnB;EACAH,MAAM,CAACI,QAAP,GAAkB,IAAIb,QAAJ,CAAaS,MAAM,CAACC,gBAAP,CAAwBI,OAAxB,EAAb,EAAgDV,OAAO,CAACW,YAAxD,EAAsE;IACtFC,WAAW,EAAE,CAAC,YAAD,EAAe,aAAf,CADyE;IAEtFC,aAAa,EAAE,CAAC,YAAD,EAAe,YAAf;EAFuE,CAAtE,CAAlB;AAID;AAED,OAAO,eAAeL,YAAf,GAA8B;EACnC,OAAOH,MAAM,CAACC,gBAAP,CAAwBE,YAAxB,EAAP;AACD;AAED,OAAO,SAASM,KAAT,GAAiB;EACtBT,MAAM,CAACC,gBAAP,CAAwBS,aAAxB,CAAsCf,OAAO,CAACW,YAA9C;AACD;AAED,OAAO,SAASK,MAAT,GAAkB;EACvBX,MAAM,CAACC,gBAAP,CAAwBW,OAAxB;EACAZ,MAAM,CAACa,QAAP,CAAgBC,MAAhB;AACD"},"metadata":{},"sourceType":"module"}